{% extends "admin/base_admin.html" %}
{% load static %}

{% block title %}√âl√®ve | AZ{% endblock %}
{% block page_title %}{% if mode == "create" %}Ajouter{% else %}Modifier{% endif %} un √©l√®ve{% endblock %}
{% block breadcrumb %}Scolaire / √âl√®ves{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'admin/css/eleves/form.css' %}?v=5">
{% endblock %}

{% block content %}

<div class="az-eleve-card az-eleve-card--modern">

  <!-- HEADER -->
  <div class="az-eleve-head az-eleve-head--modern">
    <div class="az-eleve-head-left">
      <h3 class="az-eleve-title">
        {% if mode == "create" %}Nouvel √©l√®ve{% else %}Modifier l‚Äô√©l√®ve{% endif %}
      </h3>
      <p class="az-eleve-sub">
        Renseigne les informations de base, puis valide l‚Äôenregistrement.
      </p>
    </div>

    <div class="az-eleve-head-right">
      <span class="az-badge az-badge-soft">
        <i class="fas fa-user-graduate"></i> Profil √©l√®ve
      </span>
    </div>
  </div>

  <form method="post"
        enctype="multipart/form-data"
        class="az-eleve-form az-eleve-form--modern"
        novalidate>
    {% csrf_token %}

    <!-- SECTION : Photo -->
    <div class="az-section">
      <div class="az-section-head">
        <h4 class="az-section-title"><i class="fas fa-camera"></i> Photo</h4>
        <p class="az-section-sub">Optionnelle, mais recommand√©e.</p>
      </div>

      <div class="az-photo-box az-photo-box--modern">
        <div class="az-photo-preview">
          {% if eleve and eleve.photo %}
            <img src="{{ eleve.photo.url }}" alt="Photo √©l√®ve" id="photoPreview">
          {% else %}
            <div class="az-photo-placeholder" id="photoPreview">üë§</div>
          {% endif %}
        </div>

        <div class="az-photo-field">
          <label for="{{ form.photo.id_for_label }}">Photo √©l√®ve</label>
          {{ form.photo }}
          <div class="az-help">JPG/PNG recommand√© ‚Äî taille l√©g√®re.</div>

          {% if eleve and eleve.photo %}
            <div class="az-help" style="opacity:.9;">Photo actuelle enregistr√©e.</div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- SECTION : Identit√© -->
    <div class="az-section">
      <div class="az-section-head">
        <h4 class="az-section-title"><i class="fas fa-id-card"></i> Identit√©</h4>
        <p class="az-section-sub">Nom, pr√©nom et informations personnelles.</p>
      </div>

      <div class="az-grid-2">
        <div class="az-field">
          <label for="{{ form.nom.id_for_label }}">Nom</label>
          {{ form.nom }}
        </div>

        <div class="az-field">
          <label for="{{ form.prenom.id_for_label }}">Pr√©nom</label>
          {{ form.prenom }}
        </div>
      </div>

      <div class="az-grid-2">
        <div class="az-field">
          <label for="{{ form.sexe.id_for_label }}">Sexe</label>
          {{ form.sexe }}
        </div>

        <div class="az-field">
          <label for="{{ form.date_naissance.id_for_label }}">Date de naissance</label>
          {{ form.date_naissance }}
        </div>
      </div>

      <div class="az-grid-2">
        <div class="az-field">
          <label for="{{ form.lieu_naissance.id_for_label }}">Lieu de naissance</label>
          {{ form.lieu_naissance }}
        </div>

        <div class="az-field">
          <label for="{{ form.telephone.id_for_label }}">T√©l√©phone</label>
          {{ form.telephone }}
        </div>
      </div>
    </div>

    <!-- SECTION : Adresse -->
    <div class="az-section">
      <div class="az-section-head">
        <h4 class="az-section-title"><i class="fas fa-location-dot"></i> Adresse</h4>
        <p class="az-section-sub">Adresse compl√®te de l‚Äô√©l√®ve.</p>
      </div>

      <div class="az-field">
        <label for="{{ form.adresse.id_for_label }}">Adresse</label>
        {{ form.adresse }}
      </div>
    </div>

    <!-- SECTION : Statut -->
    <div class="az-section">
      <div class="az-section-head">
        <h4 class="az-section-title"><i class="fas fa-toggle-on"></i> Statut</h4>
        <p class="az-section-sub">Activer/d√©sactiver l‚Äô√©l√®ve dans le syst√®me.</p>
      </div>

      <div class="az-switch az-switch--pill">
        {{ form.is_active }}
        <span>√âl√®ve actif</span>
      </div>
    </div>

    <!-- ACTIONS (sticky modern) -->
    <div class="az-eleve-actions az-eleve-actions--sticky">
      <div class="az-eleve-actions-left">
        <a class="az-btn" href="{% url 'core:eleve_list' %}">
          <i class="fas fa-arrow-left"></i> Retour
        </a>
      </div>

      <div class="az-eleve-actions-right">
        <button class="az-btn az-btn-gradient" type="submit" id="saveBtn">
          <i class="fas fa-save"></i> Enregistrer
        </button>
      </div>
    </div>

  </form>
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'admin/js/eleves/form.js' %}?v=3"></script>
{% endblock %}
