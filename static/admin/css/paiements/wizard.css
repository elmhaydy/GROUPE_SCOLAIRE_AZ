/* =========================================================
   AZ • Paiements Wizard — Modern / Dark-Light / Mobile-first
   Theme toggle: html[data-theme="dark"] / html[data-theme="light"]
   ========================================================= */

/* ---------- Variables (LIGHT default) ---------- */
:root{
  --bg: #f6f8fc;
  --surface: #ffffff;
  --surface-2: #f8fafc;
  --text: #0f172a;
  --muted: #64748b;

  --border: #e2e8f0;
  --border-2: #dbe4f0;

  --primary: #4361ee;
  --primary-2: #7209b7;
  --ring: rgba(114,9,183,.22);

  --success: #16a34a;
  --danger: #ef4444;
  --warn: #f59e0b;

  --shadow: 0 12px 30px rgba(2,8,23,.08);
  --shadow-2: 0 8px 20px rgba(2,8,23,.06);

  --radius: 18px;
  --radius-sm: 12px;

  --gap: 14px;
  --pad: 16px;

  --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
}

/* ---------- DARK ---------- */
html[data-theme="dark"]{
  --bg: #0b1220;
  --surface: #0f172a;
  --surface-2: #0b152b;
  --text: #e5e7eb;
  --muted: #94a3b8;

  --border: rgba(148,163,184,.18);
  --border-2: rgba(148,163,184,.26);

  --shadow: 0 16px 40px rgba(0,0,0,.35);
  --shadow-2: 0 10px 24px rgba(0,0,0,.28);

  --ring: rgba(168,85,247,.26);
}

/* ---------- Base helpers ---------- */
.az-container{
  max-width: 1100px;
  margin: 0 auto;
  padding: 18px;
  font-family: var(--font);
  color: var(--text);
}

.az-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap: 12px;
  margin: 8px 0 14px;
}

.az-title{
  margin:0;
  font-weight: 800;
  letter-spacing: -.02em;
  font-size: clamp(20px, 2vw, 26px);
  line-height: 1.1;
}

.az-sub{
  margin:6px 0 0;
  color: var(--muted);
  font-size: 13px;
}

/* Card */
.az-card{
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.92));
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: clamp(14px, 2vw, 18px);
  overflow: hidden;
}

/* in dark, subtle glass */
html[data-theme="dark"] .az-card{
  background: radial-gradient(1000px 500px at 15% -10%, rgba(67,97,238,.20), transparent 60%),
              radial-gradient(900px 500px at 85% -20%, rgba(114,9,183,.18), transparent 60%),
              var(--surface);
}

/* Labels & text */
.az-label{
  display:block;
  font-size: 12px;
  letter-spacing: .08em;
  text-transform: uppercase;
  font-weight: 700;
  color: var(--muted);
  margin: 2px 0 8px;
}

.az-muted{
  color: var(--muted);
  font-size: 13px;
}

/* ---------- Layout rows ---------- */
.az-row{
  display: grid;
  gap: var(--gap);
  margin-bottom: 14px;
}

.az-row-2{ grid-template-columns: 1fr 1fr; }
.az-row-3{ grid-template-columns: 1fr 1fr 1fr; }

/* Mobile */
@media (max-width: 920px){
  .az-row-3{ grid-template-columns: 1fr; }
}
@media (max-width: 720px){
  .az-container{ padding: 12px; }
  .az-row-2{ grid-template-columns: 1fr; }
  .az-head{ align-items: flex-start; flex-direction: column; }
}

/* ---------- Inputs / selects ---------- */
.az-input, .az-select{
  width: 100%;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--text);
  padding: 11px 12px;
  font-size: 14px;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, transform .05s ease;
}

html[data-theme="dark"] .az-input,
html[data-theme="dark"] .az-select{
  background: rgba(255,255,255,.03);
}

.az-input:focus, .az-select:focus{
  border-color: rgba(67,97,238,.55);
  box-shadow: 0 0 0 4px var(--ring);
}

.az-input:disabled, .az-select:disabled{
  opacity: .55;
  cursor: not-allowed;
}

/* mini input in table */
.az-input-mini{
  padding: 8px 10px;
  border-radius: 12px;
  font-size: 13px;
  background: transparent;
}

/* ---------- Switch chips ---------- */
.az-switch{
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 8px 0 16px;
}

.az-chip{
  appearance:none;
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--text);
  padding: 9px 12px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 13px;
  cursor: pointer;
  transition: transform .05s ease, border-color .15s ease, box-shadow .15s ease, background .15s ease;
  user-select: none;
}

.az-chip:hover{ transform: translateY(-1px); }

.az-chip.is-active{
  border-color: rgba(67,97,238,.55);
  background: linear-gradient(90deg, rgba(67,97,238,.14), rgba(114,9,183,.12));
  box-shadow: 0 0 0 4px var(--ring);
}

.az-chip.is-disabled{
  opacity: .55;
  cursor: not-allowed;
  transform: none;
}

/* ---------- Pills / soft notice ---------- */
.az-pill{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  border-radius: 999px;
  padding: 10px 12px;
  border: 1px solid var(--border);
}

.az-pill-soft{
  background: linear-gradient(90deg, rgba(67,97,238,.10), rgba(114,9,183,.08));
  border-color: rgba(67,97,238,.20);
}

/* ---------- Divider ---------- */
.az-hr{
  border: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--border), transparent);
  margin: 14px 0;
}

/* ---------- Table ---------- */
.az-table-wrap{
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  overflow: hidden;
  background: var(--surface);
  box-shadow: var(--shadow-2);
}

/* Mobile horizontal scroll */
@media (max-width: 720px){
  .az-table-wrap{
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  .az-table{
    min-width: 520px;
  }
}

.az-table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 14px;
}

.az-table thead th{
  position: sticky;
  top: 0;
  z-index: 1;
  text-align: left;
  background: var(--surface-2);
  color: var(--muted);
  font-size: 12px;
  letter-spacing: .08em;
  text-transform: uppercase;
  padding: 12px;
  border-bottom: 1px solid var(--border);
}

.az-table tbody td{
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  vertical-align: middle;
}

.az-table tbody tr:hover{
  background: rgba(67,97,238,.04);
}

html[data-theme="dark"] .az-table tbody tr:hover{
  background: rgba(255,255,255,.03);
}

.az-table tbody tr.is-paid{
  opacity: .7;
}

.az-table input[type="checkbox"]{
  width: 18px;
  height: 18px;
  accent-color: var(--primary);
  cursor: pointer;
}

/* ---------- Fratrie box & cart ---------- */
.az-fratrie{
  margin-top: 10px;
  padding: 12px;
  border-radius: var(--radius-sm);
  border: 1px dashed var(--border-2);
  background: linear-gradient(180deg, rgba(67,97,238,.06), rgba(114,9,183,.04));
}

.az-fratrie-list{
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

.az-fratrie-cart{
  margin-top: 10px;
}

#fratrieCart .az-chip{
  background: rgba(255,255,255,.02);
}

/* ---------- KPI total ---------- */
.az-total{
  display:flex;
  justify-content:flex-end;
}

.az-kpi{
  display:flex;
  align-items:baseline;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: linear-gradient(90deg, rgba(67,97,238,.10), rgba(114,9,183,.08));
}

.az-kpi span{
  font-size: 12px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: .08em;
  font-weight: 800;
}

.az-kpi strong{
  font-size: 18px;
  font-weight: 900;
  color: var(--text);
}

/* ---------- Buttons ---------- */
.az-actions{
  display:flex;
  gap: 10px;
  justify-content: space-between;
  align-items:center;
  flex-wrap: wrap;
  margin-top: 14px;
}

.az-btn{
  appearance:none;
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--text);
  padding: 10px 14px;
  border-radius: 14px;
  font-weight: 900;
  font-size: 13px;
  cursor: pointer;
  text-decoration:none;
  transition: transform .05s ease, border-color .15s ease, box-shadow .15s ease, background .15s ease;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
}

.az-btn:hover{ transform: translateY(-1px); }

.az-btn:active{ transform: translateY(0); }

.az-btn-primary{
  background: linear-gradient(90deg, rgba(67,97,238,.95), rgba(114,9,183,.92));
  border-color: rgba(67,97,238,.30);
  color: #fff;
  box-shadow: 0 10px 22px rgba(67,97,238,.20);
}

.az-btn-primary:hover{
  box-shadow: 0 14px 28px rgba(114,9,183,.22);
}

.az-btn-secondary{
  background: linear-gradient(90deg, rgba(67,97,238,.12), rgba(114,9,183,.10));
  border-color: rgba(67,97,238,.22);
}

.az-btn[disabled]{
  opacity: .55;
  cursor: not-allowed;
  transform:none !important;
}

/* ---------- TomSelect tweaks (safe, minimal) ---------- */
.ts-wrapper .ts-control{
  border-radius: 14px !important;
  border: 1px solid var(--border) !important;
  background: var(--surface-2) !important;
  padding: 9px 10px !important;
}
html[data-theme="dark"] .ts-wrapper .ts-control{
  background: rgba(255,255,255,.03) !important;
}
.ts-wrapper.focus .ts-control{
  box-shadow: 0 0 0 4px var(--ring) !important;
  border-color: rgba(67,97,238,.55) !important;
}
.ts-dropdown{
  border-radius: 14px !important;
  border: 1px solid var(--border) !important;
  overflow:hidden;
}
html[data-theme="dark"] .ts-dropdown{
  background: #0b1220 !important;
  color-scheme: dark;
}
html[data-theme="dark"] .ts-dropdown .option,
html[data-theme="dark"] .ts-dropdown .optgroup-header{
  background: #0b1220 !important;
  color: var(--text) !important;
}
.ts-dropdown .option.active{
  background: rgba(67,97,238,.12) !important;
}

/* ---------- Small polish ---------- */
.az-form section{
  animation: fadeIn .12s ease-out;
}
@keyframes fadeIn{
  from{ opacity: 0; transform: translateY(2px); }
  to{ opacity: 1; transform: translateY(0); }
}
/* =========================================================
   FIX — Dropdown <select> en DARK
   (options/optgroup fond + texte)
========================================================= */

html[data-theme="dark"] select,
html[data-theme="dark"] .az-select{
  color-scheme: dark;              /* aide le navigateur */
  background-color: #0b1220;
  border-color: rgba(148,163,184,.18);
  color: #e5e7eb;
}

/* IMPORTANT: options/optgroup (menu ouvert) */
html[data-theme="dark"] select option,
html[data-theme="dark"] .az-select option,
html[data-theme="dark"] select optgroup,
html[data-theme="dark"] .az-select optgroup{
  background-color: #0b1220 !important;
  color: #e5e7eb !important;
}

/* Option hover/selected (selon navigateur) */
html[data-theme="dark"] select option:checked,
html[data-theme="dark"] .az-select option:checked{
  background-color: #111b34 !important;
  color: #ffffff !important;
}

/* Sur certains navigateurs, ça améliore la cohérence */
html[data-theme="dark"] select:focus,
html[data-theme="dark"] .az-select:focus{
  outline: none;
  box-shadow: 0 0 0 3px rgba(114, 9, 183, .22);
  border-color: rgba(114, 9, 183, .45);
}
