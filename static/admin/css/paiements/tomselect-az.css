/* =========================================================
   AZ • TomSelect — Fix focus ring (PARENT / ENFANT)
   - même glow violet que tes inputs AZ
   - dark/light via html[data-theme]
   ========================================================= */

/* base tokens (tu peux adapter si tu as déjà des variables globales) */
:root{
  --az-primary: #4361ee;
  --az-accent:  #7209b7;
  --az-ring: rgba(114, 9, 183, .28);
  --az-border: #dbe4f0;
  --az-text: #0f172a;
  --az-bg: #ffffff;
}

html[data-theme="dark"]{
  --az-border: rgba(148,163,184,.28);
  --az-text: #e5e7eb;
  --az-bg: #0b1220;
  --az-ring: rgba(114, 9, 183, .35);
}

/* ---- wrapper ---- */
.ts-wrapper{
  width: 100%;
}

/* ---- control (la "box" visible) ---- */
.ts-control{
  min-height: 44px;
  padding: 10px 12px !important;
  border-radius: 14px !important;
  border: 1px solid var(--az-border) !important;
  background: var(--az-bg) !important;
  color: var(--az-text) !important;
  box-shadow: none !important;
  transition: border-color .15s ease, box-shadow .15s ease, transform .08s ease;
}

/* placeholder / texte */
.ts-control input,
.ts-control .item{
  color: var(--az-text) !important;
}

.ts-control input::placeholder{
  opacity: .6;
}

/* hover */
.ts-wrapper:not(.disabled) .ts-control:hover{
  border-color: color-mix(in srgb, var(--az-accent) 35%, var(--az-border)) !important;
}

/* ✅ focus glow violet (LE FIX principal) */
.ts-wrapper.focus .ts-control{
  border-color: var(--az-accent) !important;
  box-shadow: 0 0 0 4px var(--az-ring) !important;
}

/* si TomSelect met focus sur l'input interne */
.ts-control input:focus{
  outline: none !important;
  box-shadow: none !important;
}

/* disabled (évite le look "gris mort") */
.ts-wrapper.disabled .ts-control{
  opacity: .65;
  cursor: not-allowed;
}

/* ---- dropdown ---- */
.ts-dropdown{
  border-radius: 14px !important;
  border: 1px solid var(--az-border) !important;
  background: var(--az-bg) !important;
  color: var(--az-text) !important;
  overflow: hidden;
}

/* option hover/active */
.ts-dropdown .option{
  padding: 10px 12px !important;
}
.ts-dropdown .option.active,
.ts-dropdown .option:hover{
  background: color-mix(in srgb, var(--az-accent) 14%, var(--az-bg)) !important;
}

/* ✅ dark: dropdown options lisibles (ton fix NEBULA) */
html[data-theme="dark"] .ts-dropdown,
html[data-theme="dark"] .ts-dropdown .option,
html[data-theme="dark"] .ts-dropdown [data-selectable]{
  background: #0b1220 !important;
  color: #e5e7eb !important;
}
